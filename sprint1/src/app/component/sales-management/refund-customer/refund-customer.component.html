<div class="container pt-3">
  <div class="text-center"><h3>Hoàn Trả</h3></div>
  <div class="col-12 mx-auto">
    <div class="mx-auto shadow-lg p-3 mb-1 bg-white rounded-lg row d-flex justify-content-around">
      <div class="col-5 ml-3">
        <div class="form-group row">
          <label for="abc" class="col-5 col-form-label" style="max-width: 25%">Số phiếu</label>
          <div class="col-7 ">
            <input type="text" class="form-control form-control-sm "  id="abc" [(ngModel)]="searchInvoice" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="col-sm-2 px-0 mx-0">
            <button class="btn-primary form-control-sm" type="submit" (click)="search()"><i class="fa-solid fa-magnifying-glass"></i></button>
          </div>
        </div>
        <div class="form-group row">
          <label for="c" class="col-5 col-form-label"  style="max-width: 25%" >Nhân viên</label>
          <div class="col-7">
            <input type="text" class="form-control form-control-sm" value="" id="c" *ngIf="invoice != null" [value]="invoice.employee.employeeName" readonly>
          </div>
        </div>
        <div class="form-group row">
          <label for="e" class="col-5 col-form-label w-50" style="max-width: 25%">Ngày tạo</label>
          <div class="col-7">
            <input type="text" class="form-control form-control-sm" id="e" step="any" *ngIf="invoice != null" value="{{invoice.invoiceCreatedDate| date:'dd-MM-yyyy'}}" readonly>
          </div>
        </div>
      </div>
      <div class="col-5 ml-5">
        <div class="form-group row">
          <label for="kh" class="col-5 col-form-label w-50 px-0" style="max-width: 25%">Khách hàng</label>
          <div class="col-7 px-0">
            <input type="text" class="form-control form-control-sm" id="kh" *ngIf="invoice != null" value="{{invoice.customer.customerName}}" readonly>
          </div>
        </div>
        <div class="form-group row">
          <label for="type" class="col-5 col-form-label w-50 px-0" style="max-width: 25%">Loại </label>
          <div class="col-7 px-0">
            <input type="text" class="form-control form-control-sm " id="type" *ngIf="invoice != null" [value]="invoice.typeOfInvoice.typeOfInvoiceName" readonly>
          </div>
        </div>
        <div class="form-group row">
          <label for="note" class="col-5 col-form-label px-0" style="max-width: 25%">Ghi chú</label>
          <div class="col-7 px-0">
            <textarea class="form-control form-control-sm"  id="note" *ngIf="invoice != null" [value]="invoice.invoiceNote"></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--</section>-->
<!--<section class="section-margin section-margin&#45;&#45;small">-->
<div class="container">
  <div class="col-12 mx-auto">
    <div class="mx-auto shadow-lg p-3 mb-5 bg-white rounded-lg">
      <div class="d-flex justify-content-center mb-1">
        <button class="btn btn-success button" (click)="showChooseMedicine()">Thêm thuốc</button>
      </div>
      <div *ngIf="isShowMedicineList">
        <table class="table table-striped table-hover">
          <thead class="table-success">
          <tr>
            <th class="col-1 ">#</th>
            <th class="col-4 ">Tên thuốc</th>
            <th class="col-2 ">Số lượng</th>
            <th class="col-1 ">Đơn vị</th>
            <th class="col-1">Hành động</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let item of medicineOfInvoiceList , let i = index">
            <th class="col-1 ">{{i+1}}</th>
            <td class="col-4 "*ngIf="item != null">{{item.medicine.medicineName}}</td>
            <td class="col-2 " *ngIf="item != null">{{item.invoiceMedicineQuantity}}</td>
            <td class="col-1 ">Hộp</td>
            <td>
              <button class="btn-info" (click)="importMedicine(item)">Nhập
                thuốc
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div>
        <h5>Danh sách thuốc </h5>
      </div>
      <table class="table table-striped">
        <thead class="table-success ">
        <tr>
          <th class="col-1 ">#</th>
          <th class="col-4 ">Tên thuốc</th>
          <th class="col-2">Số lượng trả</th>
          <th class="col-1 ">Đơn vị</th>
          <th class="col-2">Thành tiền</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of medicineRefundList, let i = index">
          <th class="col-1 ">{{i+1}}</th>
          <td class="col-4 "*ngIf="item != null">{{item.medicine.medicineName}}</td>
          <td class="col-2 "><input type="number" [(ngModel)]="quantityRefund" class="form-control"></td>
          <td class="col-1 ">Hộp</td>
          <td class="col-1 ">10.000.000 VNĐ</td>
        </tr>
        </tbody>
      </table>
      <div class="d-flex justify-content-end">
        <label for="tongtien" class="p-2 col-form-label">TỔNG TIỀN: </label>
        <p id="tongtien" class="p-2 text-center">17.500.000 VNĐ</p>
      </div>
      <div class="d-flex justify-content-end">
        <div class="px-1">
          <button class="btn btn-success " (click)="createInvoice()">
            <i class="fa-solid fa-circle-plus"></i>
            Thanh toán
          </button>
        </div>
        <div class="px-1">
          <button class="btn btn-danger " data-target="#deleteModal"
                  data-toggle="modal">
            <i class="fa-solid fa-circle-xmark"></i>
            Xoá thuốc
          </button>
        </div>
        <div class="px-1">
          <button class="btn btn-info ">
            <i class="fa-solid fa-print"></i>
            In phiếu
          </button>
        </div>
        <div class="pl-1">
          <button class="btn btn-secondary ">
            <i class="fa fa-undo" aria-hidden="true"></i>
            Trở về
          </button>
        </div>

      </div>
    </div>
  </div>
</div>

<!--modal delete-->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">

        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Do you really want to delete this medicine
          <span class="text-danger font-weight-bold" id="nameDelete"></span>
        </p>
      </div>
      <div class="modal-footer">
        <div class="mx-auto row">
          <input type="hidden" name="id" id="idDelete">
          <button type="button" class="btn btn-secondary mx-1" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-danger mx-1 ">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>
